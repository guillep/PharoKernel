PrintVersionCommandLineHandler
	superclass: #CommandLineHandler;
	package: #'System-CommandLine'.

PrintVersionCommandLineHandler >> activate
[
	self activateHelp
		ifTrue: [ ^ self ].
	(self hasOption: 'numeric')
		ifTrue: [ self printNumericVersion.
			^ self exitSuccess ].
	(self hasOption: 'release')
		ifTrue: [ self printRelease.
			^ self exitSuccess ].
	self hasArguments
		ifFalse: [ self printVersion.
			^ self exitSuccess ].
	self printHelp.
	^ self exitFailure
]

PrintVersionCommandLineHandler >> printNumericVersion
[
	self stdout
		print: SystemVersion current highestUpdate;
		lf
]

PrintVersionCommandLineHandler >> printRelease
[
	self stdout
		print: SystemVersion current major;
		nextPutAll: '.';
		print: SystemVersion current minor;
		lf
]

PrintVersionCommandLineHandler >> printVersion
[
	self stdout
		nextPutAll: '[version] ';
		print: SystemVersion current major;
		nextPutAll: '.';
		print: SystemVersion current minor;
		nextPutAll: ' #';
		print: SystemVersion current highestUpdate;
		lf
]

PrintVersionCommandLineHandler class >> commandName
[
	^ 'printVersion'
]

PrintVersionCommandLineHandler class >> description
[
	^ 'Print image version'
]

