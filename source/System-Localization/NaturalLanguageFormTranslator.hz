NaturalLanguageFormTranslator
	instanceVariables: #(#id #generics );
	classVariables: #(#CachedTranslations );
	package: #'System-Localization'.

NaturalLanguageFormTranslator >> generics
[
	^ generics ifNil: [ generics := Dictionary new ]
]

NaturalLanguageFormTranslator >> localeID
[
	^ id
]

NaturalLanguageFormTranslator >> localeID: anID
[
	id := anID
]

NaturalLanguageFormTranslator >> name: formName form: translatedForm
[
	self generics at: formName put: translatedForm
]

NaturalLanguageFormTranslator >> translate: aString
[
	^ (self generics at: aString ifAbsent: [ nil ]) deepCopy	"Do you like to write 'form ifNotNil: [form deepCopy]'?"
]

NaturalLanguageFormTranslator class >> cachedTranslations
[
	"CachedTranslations := nil"

	^ CachedTranslations ifNil: [ CachedTranslations := Dictionary new ]
]

NaturalLanguageFormTranslator class >> cleanUp
[
	"Flush caches"

	CachedTranslations := nil
]

NaturalLanguageFormTranslator class >> isoLanguage: isoLanguage
[
	"Return the generic language translator as there is no information about the country code"

	^ self isoLanguage: isoLanguage isoCountry: nil
]

NaturalLanguageFormTranslator class >> isoLanguage: isoLanguage isoCountry: isoCountry
[
	^ self localeID: (LocaleID isoLanguage: isoLanguage isoCountry: isoCountry)
]

NaturalLanguageFormTranslator class >> localeID: localeID
[
	^ self cachedTranslations at: localeID ifAbsentPut: [ self new localeID: localeID ]
]

