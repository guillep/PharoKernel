String >> unzipped
[
	| magic1 magic2 |
	magic1 := (self at: 1) asInteger.
	magic2 := (self at: 2) asInteger.
	(magic1 = 16r1F and: [ magic2 = 16r8B ])
		ifFalse: [ ^ self ].
	^ (GZipReadStream on: self) upToEnd
]

String >> zipped
[
	| stream gzstream |
	stream := RWBinaryOrTextStream on: String new.
	gzstream := GZipWriteStream on: stream.
	gzstream nextPutAll: self.
	gzstream close.
	stream reset.
	^ stream contents
]

